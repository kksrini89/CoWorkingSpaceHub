{"version":3,"sources":["../../src/pages/space/space.module.ts","../../src/pages/space/space.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicModule, IonicPageModule } from 'ionic-angular';\nimport { SpacePage } from './space';\n\n@NgModule({\n  declarations: [\n    SpacePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SpacePage),\n    IonicModule\n  ],\n})\nexport class SpacePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/space/space.module.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams, LoadingController, Loading, IonicPage } from 'ionic-angular';\r\n\r\nimport { CoWorkingSpaceResult } from './../../models/coworkingmapresult.interface';\r\nimport { CoworkingmapProvider } from './../../providers/coworkingmap';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-space',\r\n  templateUrl: 'space.html',\r\n})\r\nexport class SpacePage {\r\n  // private spaces: CoWorkingSpace[];\r\n  private spaces: any[];\r\n  private spaceSubscription: Subscription = new Subscription();\r\n  private loading: Loading;\r\n\r\n  searchInput: string = '';\r\n\r\n  constructor(public navCtrl: NavController, private loadingCtrl: LoadingController,\r\n    public navParams: NavParams, private spaceService: CoworkingmapProvider) {\r\n  }\r\n\r\n  OnInput(event: any) {\r\n    let tempSpace = this.spaceService.getCitites();\r\n    let inputValue = event.target.value;\r\n    if (inputValue && inputValue.trim() !== '') {\r\n      this.spaces = tempSpace.filter(item => {\r\n        return (item.toString().toLowerCase().indexOf(inputValue.toLowerCase()) > -1)\r\n      });\r\n    }\r\n  }\r\n\r\n  OnCancel(event: any) {\r\n    this.spaces = this.spaceService.getCitites();\r\n  }\r\n\r\n  searchByCity(city: string) {\r\n    let spaces: CoWorkingSpaceResult[];\r\n    this.loading = this.loadingCtrl.create({\r\n      content: 'Loading spaces...'\r\n    });\r\n    this.loading.present();\r\n    this.spaceService.getWorkingSpaceFilterByCity('india', city)\r\n      .subscribe(data => {\r\n        spaces = data;\r\n        this.loading.dismiss().then(data => {\r\n          this.navCtrl.push('SpacebycityPage', { 'selectedCountry': 'india', 'selectedCity': city, 'spaces': spaces });\r\n        })\r\n      });\r\n  }\r\n\r\n  private loadDistinctCities(result) {\r\n    let temp = [];\r\n    result.filter(item => {\r\n      if (temp.indexOf(item.city) == -1)\r\n        temp.push(item.city);\r\n    });\r\n    return temp;\r\n  }\r\n\r\n\r\n  ionViewWillEnter() {\r\n    this.loading = this.loadingCtrl.create({\r\n      content: 'Loading cities...'\r\n    });\r\n    this.loading.present();\r\n\r\n    let token = this.spaceService.getToken();\r\n    if (token !== null && token !== undefined) {\r\n      this.spaceSubscription = this.spaceService.getWorkingSpaceFilterByCountry('India')\r\n        .subscribe(result => {\r\n          this.loading.dismiss().then(data => {\r\n            this.spaces = this.loadDistinctCities(result);\r\n            this.spaceService.setCities(this.spaces);\r\n            // this.cities = result;\r\n          })\r\n        });\r\n    } else {\r\n      this.spaceService.getTokenObservable().subscribe(data => {\r\n        this.spaceService.setToken(data.token);\r\n        this.spaceSubscription = this.spaceService.getWorkingSpaceFilterByCountry('India')\r\n          .subscribe(result => {\r\n            this.loading.dismiss().then(data => {\r\n              this.spaces = this.loadDistinctCities(result);\r\n              this.spaceService.setCities(this.spaces);\r\n              // this.cities = result;\r\n            })\r\n          });\r\n      });\r\n    }\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.spaces = [];\r\n    this.spaceSubscription.unsubscribe();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    // this.loading = this.loadingCtrl.create();\r\n    // this.loading.present();\r\n    // this.spaceService.getToken().subscribe(data => {\r\n    //   this.spaceService.setToken(data.token);\r\n    //   this.spaceSubscription = this.spaceService.getWorkingSpaceFilterByCountry('India')\r\n    //     .subscribe(result => {\r\n    //       this.loading.dismiss().then(data => {\r\n    //         this.spaces = result;\r\n    //       })\r\n    //     });\r\n    // });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/space/space.ts"],"sourceRoot":""}